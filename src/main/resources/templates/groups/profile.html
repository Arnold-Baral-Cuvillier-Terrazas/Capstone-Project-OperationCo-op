
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Show Groups</title>
    <link th:replace="partials/links :: links"/>
    <link th:href="@{/css/style.css}" rel="stylesheet"/>

</head>

<body>
<div id="wrapper" class="d-flex">
    <div th:replace="partials/sidebar :: sidebar"></div>
    <div id="page-content-wrapper">
        <nav th:replace="partials/navbar :: navbar"></nav>
        <div class="container-fluid page-body">


            <h1>Welcome to <span th:text="${group.name}"></span>'s Profile Page</h1>
            <div class="groupProfile">
                <!--    adding profile picture-->
                <div class="card">
                    <!--    adding profile picture-->
                    <div class="profileImg">
                        <img id="imgP" th:src="${group.getProfilePic()}"
                             style="width: 100%; height:100%; object-fit:cover">
                    </div>
                    <h4>Name: <span th:text="${group.name}"></span></h4>
                </div>
            </div>

                <button id="profile-btn2" class="pb" type="button">Update Profile Image</button>


                <!--    Join Group Feature-->
                <h2>Join our Group!</h2>
                <form th:action="@{'/groups/join/' + ${group.id}}" method="POST">
                    <input name="UserId" th:value="${user.id}" type="hidden">
                    <button type="submit">Join Group</button>
                </form>

                <h4>Description: </h4>
                <p><span th:text="${group.description}"></span></p>
                <div>
                    <h4> Tags defines our group : </h4>
                    <span class="pill" th:each="tag : ${group.getTags()}" th:id="${tag.name}"
                          th:text="${tag.name}"></span>
                </div>

            <button id="profile-btn2" class="pb" type="button">Update Profile Image</button>

            <input type="hidden" id="rating" name="rating" value="-1">
            <div class="rating">
                <i class="ratings_stars fa fa-star" data-rating="1"></i>
                <i class="ratings_stars fa fa-star" data-rating="2"></i>
                <i class="ratings_stars fa fa-star" data-rating="3"></i>
                <i class="ratings_stars fa fa-star" data-rating="4"></i>
                <i class="ratings_stars fa fa-star" data-rating="5"></i>
            </div>
            <!--    Join Group Feature-->
            <h2>Join our Group!</h2>
            <form th:action="@{'/groups/join/' + ${group.id}}" method="POST">
                <input name="UserId" th:value="${user.id}" type="hidden">
                <button type="submit">Join Group</button>
            </form>

            <h4>Description: </h4>
            <br>


            <p><span th:text="${group.description}"></span></p>
            <div>
                <h4> Tags defines me : </h4>
                <span class="pill" th:each="tag : ${group.getTags()}" th:id="${tag.name}"
                      th:text="${tag.name}"></span>
            </div>
            <div class="group-users">
                <h4>Members in our Group:</h4>
                <show_users th:if="${group.users}">
                    <div th:each="gUser: ${group.users}">
                        <!--                <p th:text="${gUser.getFullName()}"></p>-->
                        <a th:href="@{'/profile/' + ${gUser.id}}" th:text="${gUser.getFullName()}"></a>

                        <div th:if="${group.owner.id == user.id}">
                            <a th:href="@{'/groups/userDelete/' + ${group.id} + '?UserId=' + ${gUser.id}}">Delete Member</a>
                        </div>
                    </div>
                </show_users>

            </div>

            <!--                <p><span th:text="${group.description}"></span></p>-->


            <!--    link-->

            <!--                <h4>Description: </h4>-->
            <!--                <br>-->
            <!--                <p><span th:text="${group.description}"></span></p>-->
            <!--                <div>-->
            <!--                    <h4> Tags defines me : </h4>-->
            <!--                    <span class="pill" th:each="tag : ${group.getTags()}" th:id="${tag.name}"-->
            <!--                          th:text="${tag.name}"></span>-->
            <!--                </div>-->
            <!--                <div class="group-users">-->
            <!--                    <h4>Members in our Group:</h4>-->
            <!--                    <show_users th:if="${group.users}">-->
            <!--                        <div th:each="user: ${group.users}">-->
            <!--                            <p th:text="${user.getFullName()}"></p>-->
            <!--                        </div>-->
            <!--                    </show_users>-->
            <!--                </div>-->
            <!--            </div>-->
            <!--<button  class="ib" type="button">Edit profile</button>-->
            <show_post th:if="${group.owner.id == user.id}">
                <form style="display: inline" th:action="@{'/groups/edit/' + ${group.id}}">
                    <button>Edit</button>
                </form>
                <form style="display: inline" th:action="@{'/groups/delete/' + ${group.id}}">
                    <button>Delete</button>
                </form>
            </show_post>
        </div>
    </div>
</div>
<!--<header th:replace="partials/header :: header"></header>-->
<!--<nav th:replace="partials/navbar :: navbar"></nav>-->


<script th:inline="javascript">const groupId =/*[[${group.id}]]*/</script>
<script th:inline="javascript">const url =/*[[@{/profile/pic}]]*/</script>
<scripts th:replace="partials/scripts :: scripts"></scripts>
<script src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
<script th:src="@{/js/keys.js}"></script>
<script th:src="@{/js/filestack.js}"></script>
<script th:src="@{/js/groupProfile.js}"></script>
</body>
</html>